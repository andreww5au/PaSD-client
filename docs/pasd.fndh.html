<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module fndh</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>fndh</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/tmphome/PaSD-Client/pasd/fndh.py">/tmphome/PaSD-Client/pasd/fndh.py</a></font></td></tr></table>
    <p><tt>Classes&nbsp;to&nbsp;handle&nbsp;communications&nbsp;with&nbsp;SKA-Low&nbsp;PaSD&nbsp;'SMARTbox'&nbsp;elements,&nbsp;24&nbsp;of&nbsp;which&nbsp;make<br>
up&nbsp;an&nbsp;SKA-Low&nbsp;station.<br>
&nbsp;<br>
This&nbsp;code&nbsp;runs&nbsp;on&nbsp;the&nbsp;MCCS&nbsp;side&nbsp;in&nbsp;the&nbsp;control&nbsp;building,&nbsp;and&nbsp;talks&nbsp;to&nbsp;a&nbsp;physical&nbsp;<a href="#FNDH">FNDH</a>&nbsp;module&nbsp;in&nbsp;the&nbsp;field.</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="pasd.conversion.html">pasd.conversion</a><br>
<a href="json.html">json</a><br>
</td><td width="25%" valign=top><a href="logging.html">logging</a><br>
<a href="pasd.smartbox.html">pasd.smartbox</a><br>
</td><td width="25%" valign=top><a href="time.html">time</a><br>
<a href="pasd.transport.html">pasd.transport</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="pasd.smartbox.html#PortStatus">pasd.smartbox.PortStatus</a>(<a href="builtins.html#object">builtins.object</a>)
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="fndh.html#PdocStatus">PdocStatus</a>
</font></dt></dl>
</dd>
<dt><font face="helvetica, arial"><a href="pasd.transport.html#ModbusDevice">pasd.transport.ModbusDevice</a>(<a href="builtins.html#object">builtins.object</a>)
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="fndh.html#FNDH">FNDH</a>
</font></dt></dl>
</dd>
</dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="FNDH">class <strong>FNDH</strong></a>(<a href="pasd.transport.html#ModbusDevice">pasd.transport.ModbusDevice</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt><a href="#FNDH">FNDH</a>(conn=None,&nbsp;modbus_address=None,&nbsp;logger=None)<br>
&nbsp;<br>
<a href="#FNDH">FNDH</a>&nbsp;class,&nbsp;an&nbsp;instance&nbsp;of&nbsp;which&nbsp;represents&nbsp;the&nbsp;microcontroller&nbsp;inside&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>&nbsp;in&nbsp;an&nbsp;SKA-Low&nbsp;station,&nbsp;sitting<br>
(virtually)&nbsp;on&nbsp;the&nbsp;same&nbsp;shared&nbsp;low-speed&nbsp;serial&nbsp;bus&nbsp;used&nbsp;to&nbsp;communicate&nbsp;with&nbsp;the&nbsp;SMARTboxes.<br>
&nbsp;<br>
Attributes&nbsp;are:<br>
modbus_address:&nbsp;Modbus&nbsp;address&nbsp;of&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>&nbsp;(usually&nbsp;31)<br>
mbrv:&nbsp;Modbus&nbsp;register-map&nbsp;revision&nbsp;number&nbsp;for&nbsp;this&nbsp;physical&nbsp;<a href="#FNDH">FNDH</a><br>
pcbrv:&nbsp;PCB&nbsp;revision&nbsp;number&nbsp;for&nbsp;this&nbsp;physical&nbsp;<a href="#FNDH">FNDH</a><br>
register_map:&nbsp;A&nbsp;dictionary&nbsp;mapping&nbsp;register&nbsp;name&nbsp;to&nbsp;(register_number,&nbsp;number_of_registers,&nbsp;description,&nbsp;scaling_function)&nbsp;tuple<br>
cpuid:&nbsp;CPU&nbsp;identifier&nbsp;(integer)<br>
chipid:&nbsp;Unique&nbsp;ID&nbsp;number&nbsp;(16&nbsp;bytes),&nbsp;different&nbsp;for&nbsp;every&nbsp;physical&nbsp;<a href="#FNDH">FNDH</a><br>
firmware_version:&nbsp;Firmware&nbsp;revision&nbsp;mumber&nbsp;for&nbsp;this&nbsp;physical&nbsp;<a href="#FNDH">FNDH</a><br>
uptime:&nbsp;Time&nbsp;in&nbsp;seconds&nbsp;since&nbsp;this&nbsp;<a href="#FNDH">FNDH</a>&nbsp;was&nbsp;powered&nbsp;up<br>
station_value:&nbsp;Modbus&nbsp;address&nbsp;read&nbsp;back&nbsp;from&nbsp;the&nbsp;SYS_ADDRESS&nbsp;register&nbsp;-&nbsp;should&nbsp;always&nbsp;equal&nbsp;modbus_address<br>
psu48v1_voltage:&nbsp;Voltage&nbsp;measured&nbsp;on&nbsp;the&nbsp;output&nbsp;of&nbsp;the&nbsp;first&nbsp;48VDC&nbsp;power&nbsp;supply&nbsp;(Volts)<br>
psu48v2_voltage:&nbsp;Voltage&nbsp;measured&nbsp;on&nbsp;the&nbsp;output&nbsp;of&nbsp;the&nbsp;second&nbsp;48VDC&nbsp;power&nbsp;supply&nbsp;(Volts)<br>
psu5v_voltage:&nbsp;Voltage&nbsp;measured&nbsp;on&nbsp;the&nbsp;output&nbsp;of&nbsp;the&nbsp;5VDC&nbsp;power&nbsp;supply&nbsp;(Volts)<br>
psu48v_current:&nbsp;Total&nbsp;current&nbsp;on&nbsp;the&nbsp;48VDC&nbsp;bus&nbsp;(Amps)<br>
psu48v_temp:&nbsp;Common&nbsp;temperature&nbsp;for&nbsp;both&nbsp;48VDC&nbsp;power&nbsp;supplies&nbsp;(deg&nbsp;C)<br>
psu5v_temp:&nbsp;Temperature&nbsp;of&nbsp;the&nbsp;5VDC&nbsp;power&nbsp;supply&nbsp;(Volts)<br>
pcb_temp:&nbsp;Temperature&nbsp;on&nbsp;the&nbsp;internal&nbsp;PCB&nbsp;(deg&nbsp;C)<br>
outside_temp:&nbsp;Outside&nbsp;temperature&nbsp;(deg&nbsp;C)<br>
statuscode:&nbsp;Status&nbsp;value,&nbsp;one&nbsp;of&nbsp;the&nbsp;STATUS_*&nbsp;globals,&nbsp;and&nbsp;used&nbsp;as&nbsp;a&nbsp;key&nbsp;for&nbsp;STATUS_CODES&nbsp;(eg&nbsp;0&nbsp;meaning&nbsp;'OK')<br>
status:&nbsp;Status&nbsp;string,&nbsp;obtained&nbsp;from&nbsp;STATUS_CODES&nbsp;global&nbsp;(eg&nbsp;'OK')<br>
service_led:&nbsp;True&nbsp;if&nbsp;the&nbsp;blue&nbsp;service&nbsp;indicator&nbsp;LED&nbsp;is&nbsp;switched&nbsp;ON.<br>
indicator_code:&nbsp;LED&nbsp;status&nbsp;value,&nbsp;one&nbsp;of&nbsp;the&nbsp;LED_*&nbsp;globals,&nbsp;and&nbsp;used&nbsp;as&nbsp;a&nbsp;key&nbsp;for&nbsp;LED_CODES<br>
indicator_state:&nbsp;LED&nbsp;status&nbsp;string,&nbsp;obtained&nbsp;from&nbsp;LED_CODES<br>
readtime:&nbsp;Unix&nbsp;timestamp&nbsp;for&nbsp;the&nbsp;last&nbsp;successful&nbsp;polled&nbsp;data&nbsp;from&nbsp;this&nbsp;<a href="#FNDH">FNDH</a><br>
thresholds:&nbsp;JSON&nbsp;structure&nbsp;containing&nbsp;the&nbsp;analog&nbsp;threshold&nbsp;values&nbsp;for&nbsp;each&nbsp;analogue&nbsp;sensor&nbsp;on&nbsp;this&nbsp;<a href="#FNDH">FNDH</a><br>
portconfig:&nbsp;JSON&nbsp;structure&nbsp;containing&nbsp;the&nbsp;port&nbsp;configuration&nbsp;(desired&nbsp;online&nbsp;and&nbsp;offline&nbsp;power&nbsp;state)&nbsp;for&nbsp;each&nbsp;port<br>
&nbsp;<br>
ports:&nbsp;A&nbsp;dictionary&nbsp;with&nbsp;port&nbsp;number&nbsp;(1-28)&nbsp;as&nbsp;the&nbsp;key,&nbsp;and&nbsp;instances&nbsp;of&nbsp;<a href="#PdocStatus">PdocStatus</a>()&nbsp;as&nbsp;values.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%"><dl><dt>Method resolution order:</dt>
<dd><a href="fndh.html#FNDH">FNDH</a></dd>
<dd><a href="pasd.transport.html#ModbusDevice">pasd.transport.ModbusDevice</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="FNDH-__init__"><strong>__init__</strong></a>(self, conn=None, modbus_address=None, logger=None)</dt><dd><tt>Instantiate&nbsp;an&nbsp;instance&nbsp;of&nbsp;<a href="#FNDH">FNDH</a>()&nbsp;using&nbsp;a&nbsp;connection&nbsp;object,&nbsp;and&nbsp;the&nbsp;modbus&nbsp;address&nbsp;for&nbsp;the&nbsp;<a href="#FNDH">FNDH</a><br>
(usually&nbsp;31).<br>
&nbsp;<br>
This&nbsp;initialisation&nbsp;function&nbsp;doesn't&nbsp;communicate&nbsp;with&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>&nbsp;hardware,&nbsp;it&nbsp;just&nbsp;sets&nbsp;up&nbsp;the<br>
data&nbsp;structures.<br>
&nbsp;<br>
:param&nbsp;conn:&nbsp;An&nbsp;instance&nbsp;of&nbsp;transport.Connection()&nbsp;defining&nbsp;a&nbsp;connection&nbsp;to&nbsp;an&nbsp;<a href="#FNDH">FNDH</a><br>
:param&nbsp;modbus_address:&nbsp;Modbus&nbsp;address&nbsp;of&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>&nbsp;(usually&nbsp;31)</tt></dd></dl>

<dl><dt><a name="FNDH-__repr__"><strong>__repr__</strong></a>(self)</dt><dd><tt>Return&nbsp;repr(self).</tt></dd></dl>

<dl><dt><a name="FNDH-__str__"><strong>__str__</strong></a>(self)</dt><dd><tt>Return&nbsp;str(self).</tt></dd></dl>

<dl><dt><a name="FNDH-configure_all_off"><strong>configure_all_off</strong></a>(self, thresholds=None, portconfig=None)</dt><dd><tt>Get&nbsp;the&nbsp;threshold&nbsp;data&nbsp;(as&nbsp;given,&nbsp;or&nbsp;from&nbsp;the&nbsp;config&nbsp;file),&nbsp;and&nbsp;write&nbsp;it&nbsp;to&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>.<br>
&nbsp;<br>
If&nbsp;that&nbsp;succeeds,&nbsp;read&nbsp;the&nbsp;port&nbsp;configuration&nbsp;(desired&nbsp;state&nbsp;online,&nbsp;desired&nbsp;state&nbsp;offline)&nbsp;from&nbsp;the&nbsp;config<br>
file&nbsp;(if&nbsp;it's&nbsp;not&nbsp;supplied)&nbsp;and&nbsp;save&nbsp;it&nbsp;in&nbsp;self.<strong>portconfig</strong>,&nbsp;but&nbsp;do&nbsp;NOT&nbsp;write&nbsp;it&nbsp;to&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>.&nbsp;Instead,<br>
configure&nbsp;all&nbsp;outputs&nbsp;as&nbsp;'off'&nbsp;in&nbsp;both&nbsp;online&nbsp;and&nbsp;offline&nbsp;states.<br>
&nbsp;<br>
Then&nbsp;write&nbsp;a&nbsp;'1'&nbsp;to&nbsp;the&nbsp;status&nbsp;register&nbsp;to&nbsp;tell&nbsp;the&nbsp;micontroller&nbsp;to<br>
transition&nbsp;out&nbsp;of&nbsp;the&nbsp;'UNINITIALISED'&nbsp;state.<br>
&nbsp;<br>
:param&nbsp;thresholds:&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;the&nbsp;ADC&nbsp;thresholds&nbsp;to&nbsp;write&nbsp;to&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>.&nbsp;If&nbsp;none,&nbsp;use&nbsp;defaults<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;the&nbsp;JSON&nbsp;file&nbsp;specified&nbsp;in&nbsp;THRESHOLD_FILENAME<br>
:param&nbsp;portconfig:&nbsp;A&nbsp;dictionary&nbsp;containing&nbsp;the&nbsp;port&nbsp;configuration&nbsp;data.&nbsp;If&nbsp;none,&nbsp;use<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaults&nbsp;from&nbsp;the&nbsp;JSON&nbsp;file&nbsp;specified&nbsp;in&nbsp;PORTCONFIG_FILENAME<br>
:return:&nbsp;True&nbsp;for&nbsp;sucess</tt></dd></dl>

<dl><dt><a name="FNDH-configure_final"><strong>configure_final</strong></a>(self)</dt><dd><tt>Use&nbsp;the&nbsp;self.<strong>portconfig</strong>&nbsp;data&nbsp;to&nbsp;set&nbsp;all&nbsp;the&nbsp;desired_state_online&nbsp;and&nbsp;desired_state_offline<br>
flags,&nbsp;and&nbsp;write&nbsp;the&nbsp;full&nbsp;set&nbsp;of&nbsp;port&nbsp;data&nbsp;to&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>,&nbsp;to&nbsp;turn&nbsp;on&nbsp;all&nbsp;desired&nbsp;ports.<br>
&nbsp;<br>
This&nbsp;is&nbsp;called&nbsp;after&nbsp;the&nbsp;power-on&nbsp;procedure,&nbsp;which&nbsp;turns&nbsp;on&nbsp;all&nbsp;of&nbsp;the&nbsp;ports,&nbsp;one&nbsp;by&nbsp;one,&nbsp;to&nbsp;determine<br>
which&nbsp;SMARTbox&nbsp;is&nbsp;connected&nbsp;to&nbsp;which&nbsp;PDoC&nbsp;port.</tt></dd></dl>

<dl><dt><a name="FNDH-poll_data"><strong>poll_data</strong></a>(self)</dt><dd><tt>Get&nbsp;all&nbsp;the&nbsp;polled&nbsp;registers&nbsp;from&nbsp;the&nbsp;device,&nbsp;and&nbsp;use&nbsp;the&nbsp;contents&nbsp;to&nbsp;fill&nbsp;in&nbsp;the&nbsp;instance&nbsp;data&nbsp;for&nbsp;this&nbsp;instance.<br>
&nbsp;<br>
:return:True&nbsp;for&nbsp;success,&nbsp;None&nbsp;if&nbsp;there&nbsp;were&nbsp;any&nbsp;errors.</tt></dd></dl>

<dl><dt><a name="FNDH-write_portconfig"><strong>write_portconfig</strong></a>(self, write_state=True, write_to=False, write_breaker=False)</dt><dd><tt>Write&nbsp;the&nbsp;current&nbsp;instance&nbsp;data&nbsp;for&nbsp;all&nbsp;of&nbsp;the&nbsp;ports&nbsp;to&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>.<br>
&nbsp;<br>
If&nbsp;'write_state'&nbsp;is&nbsp;True,&nbsp;then&nbsp;the&nbsp;'desired_state_online'&nbsp;and&nbsp;'desired_state_offline'&nbsp;will&nbsp;have&nbsp;bitfields<br>
corresponding&nbsp;to&nbsp;the&nbsp;current&nbsp;instance&nbsp;data,&nbsp;otherwise&nbsp;they&nbsp;will&nbsp;contain&nbsp;'00'&nbsp;(meaning&nbsp;'do&nbsp;not&nbsp;overwrite').<br>
&nbsp;<br>
If&nbsp;'write_to'&nbsp;is&nbsp;True,&nbsp;then&nbsp;the&nbsp;'technicians&nbsp;override'&nbsp;bits&nbsp;will&nbsp;have&nbsp;bitfields&nbsp;corresponding&nbsp;to&nbsp;the<br>
current&nbsp;instance&nbsp;data&nbsp;(locally_forced_on&nbsp;and&nbsp;locally_forced_off),&nbsp;otherwise&nbsp;they&nbsp;will&nbsp;contain&nbsp;'00'<br>
&nbsp;<br>
If&nbsp;'write_breaker'&nbsp;is&nbsp;True,&nbsp;then&nbsp;the&nbsp;bit&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;'reset&nbsp;breaker'&nbsp;action&nbsp;will&nbsp;be&nbsp;1,&nbsp;otherwise<br>
it&nbsp;will&nbsp;contain&nbsp;0&nbsp;(do&nbsp;not&nbsp;reset&nbsp;the&nbsp;breaker).<br>
&nbsp;<br>
:return:&nbsp;True&nbsp;if&nbsp;successful,&nbsp;False&nbsp;on&nbsp;failure</tt></dd></dl>

<dl><dt><a name="FNDH-write_thresholds"><strong>write_thresholds</strong></a>(self)</dt><dd><tt>Write&nbsp;the&nbsp;ADC&nbsp;threshold&nbsp;data&nbsp;(loaded&nbsp;on&nbsp;init&nbsp;from&nbsp;a&nbsp;JSON&nbsp;file&nbsp;into&nbsp;self.<strong>thresholds</strong>)&nbsp;to&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>.<br>
&nbsp;<br>
:return:&nbsp;True&nbsp;if&nbsp;successful,&nbsp;False&nbsp;on&nbsp;failure,&nbsp;None&nbsp;if&nbsp;self.<strong>thresholds</strong>&nbsp;is&nbsp;empty</tt></dd></dl>

<hr>
Data descriptors inherited from <a href="pasd.transport.html#ModbusDevice">pasd.transport.ModbusDevice</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="PdocStatus">class <strong>PdocStatus</strong></a>(<a href="pasd.smartbox.html#PortStatus">pasd.smartbox.PortStatus</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt><a href="#PdocStatus">PdocStatus</a>(port_number,&nbsp;modbus_address,&nbsp;status_bitmap,&nbsp;read_timestamp,&nbsp;logger=None)<br>
&nbsp;<br>
<a href="#FNDH">FNDH</a>&nbsp;PDoC&nbsp;port&nbsp;status&nbsp;instance,&nbsp;representing&nbsp;one&nbsp;of&nbsp;the&nbsp;28&nbsp;FEM&nbsp;PDoC&nbsp;ports&nbsp;that&nbsp;supply&nbsp;48VDC&nbsp;and<br>
serial&nbsp;comms&nbsp;to&nbsp;SMARTboxes&nbsp;in&nbsp;the&nbsp;field,&nbsp;making&nbsp;up&nbsp;a&nbsp;station.<br>
&nbsp;<br>
Some&nbsp;of&nbsp;the&nbsp;attributes&nbsp;inherited&nbsp;from&nbsp;the&nbsp;smartbox.<a href="pasd.smartbox.html#PortStatus">PortStatus</a>&nbsp;class&nbsp;are&nbsp;unused&nbsp;here,&nbsp;for&nbsp;PDoC&nbsp;port&nbsp;status<br>
instances.<br>
&nbsp;<br>
Attributes&nbsp;are:<br>
port_number:&nbsp;Which&nbsp;PDoC&nbsp;port&nbsp;this&nbsp;is&nbsp;(1-28)<br>
modbus_address:&nbsp;Modbus&nbsp;address&nbsp;of&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>&nbsp;microcontroller&nbsp;(should&nbsp;always&nbsp;be&nbsp;31)<br>
smartbox_address:&nbsp;Modbus&nbsp;address&nbsp;of&nbsp;the&nbsp;SMARTbox&nbsp;connected&nbsp;to&nbsp;this&nbsp;PDoC&nbsp;port&nbsp;(1-30)&nbsp;(populated&nbsp;externally&nbsp;by&nbsp;the&nbsp;station&nbsp;startup&nbsp;code)<br>
status_bitmap:&nbsp;Raw&nbsp;contents&nbsp;of&nbsp;the&nbsp;P&lt;NN&gt;_STATE&nbsp;register&nbsp;for&nbsp;this&nbsp;port&nbsp;(0-65535)<br>
current_timestamp:&nbsp;Unused<br>
current_raw:&nbsp;Unused<br>
current:&nbsp;Unused<br>
status_timestamp:&nbsp;Unix&nbsp;epoch&nbsp;at&nbsp;the&nbsp;time&nbsp;the&nbsp;P&lt;NN&gt;_STATE&nbsp;register&nbsp;was&nbsp;last&nbsp;read&nbsp;(integer)<br>
system_level_enabled:&nbsp;Has&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>&nbsp;decided&nbsp;that&nbsp;it's&nbsp;in&nbsp;a&nbsp;safe&nbsp;state&nbsp;(not&nbsp;overheated,&nbsp;etc)&nbsp;(Boolean)<br>
system_online:&nbsp;Has&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>&nbsp;decided&nbsp;that&nbsp;it's&nbsp;heard&nbsp;from&nbsp;the&nbsp;MCCS&nbsp;recently&nbsp;enough&nbsp;to&nbsp;go&nbsp;online&nbsp;(Boolean)<br>
desire_enabled_online:&nbsp;Does&nbsp;the&nbsp;MCCS&nbsp;want&nbsp;this&nbsp;PDoC&nbsp;port&nbsp;enabled&nbsp;when&nbsp;the&nbsp;device&nbsp;is&nbsp;online&nbsp;(Boolean)<br>
desire_enabled_offline:Does&nbsp;the&nbsp;MCCS&nbsp;want&nbsp;this&nbsp;PDoC&nbsp;port&nbsp;enabled&nbsp;when&nbsp;the&nbsp;device&nbsp;is&nbsp;offline&nbsp;(Boolean)<br>
locally_forced_on:&nbsp;Has&nbsp;this&nbsp;PDoC&nbsp;port&nbsp;been&nbsp;locally&nbsp;forced&nbsp;ON&nbsp;by&nbsp;a&nbsp;technician&nbsp;overide&nbsp;(Boolean)<br>
locally_forced_off:&nbsp;Has&nbsp;this&nbsp;PDoC&nbsp;port&nbsp;been&nbsp;locally&nbsp;forced&nbsp;OFF&nbsp;by&nbsp;a&nbsp;technician&nbsp;overide&nbsp;(Boolean)<br>
breaker_tripped:&nbsp;Unused<br>
power_state:&nbsp;Is&nbsp;this&nbsp;port&nbsp;switched&nbsp;ON&nbsp;(Boolean)<br>
power_sense:&nbsp;True&nbsp;if&nbsp;48V&nbsp;power&nbsp;is&nbsp;detected&nbsp;on&nbsp;the&nbsp;output&nbsp;of&nbsp;this&nbsp;port<br>
antenna_number:&nbsp;Unused<br>
&nbsp;<br>
Note&nbsp;that&nbsp;modbus_address,&nbsp;system_level_enabled&nbsp;and&nbsp;system_online&nbsp;have&nbsp;the&nbsp;the&nbsp;same&nbsp;values&nbsp;for&nbsp;all&nbsp;ports.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%"><dl><dt>Method resolution order:</dt>
<dd><a href="fndh.html#PdocStatus">PdocStatus</a></dd>
<dd><a href="pasd.smartbox.html#PortStatus">pasd.smartbox.PortStatus</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="PdocStatus-__init__"><strong>__init__</strong></a>(self, port_number, modbus_address, status_bitmap, read_timestamp, logger=None)</dt><dd><tt>Instantiate&nbsp;an&nbsp;instance&nbsp;of&nbsp;a&nbsp;<a href="#PdocStatus">PdocStatus</a>()&nbsp;object.<br>
&nbsp;<br>
This&nbsp;initialisation&nbsp;function&nbsp;doesn't&nbsp;communicate&nbsp;with&nbsp;the&nbsp;port&nbsp;hardware,&nbsp;it&nbsp;just&nbsp;sets&nbsp;up&nbsp;the<br>
data&nbsp;structures.<br>
&nbsp;<br>
:param&nbsp;port_number:&nbsp;Which&nbsp;PDoC&nbsp;port&nbsp;this&nbsp;is&nbsp;(1-28)<br>
:param&nbsp;modbus_address:&nbsp;Modbus&nbsp;address&nbsp;of&nbsp;the&nbsp;<a href="#FNDH">FNDH</a>&nbsp;microcontroller&nbsp;(should&nbsp;always&nbsp;be&nbsp;31)<br>
:param&nbsp;status_bitmap:&nbsp;Raw&nbsp;contents&nbsp;of&nbsp;the&nbsp;P&lt;NN&gt;_STATE&nbsp;register&nbsp;for&nbsp;this&nbsp;port&nbsp;(0-65535)<br>
:param&nbsp;read_timestamp:&nbsp;Unix&nbsp;epoch&nbsp;at&nbsp;the&nbsp;time&nbsp;the&nbsp;P&lt;NN&gt;_STATE&nbsp;register&nbsp;was&nbsp;last&nbsp;read&nbsp;(integer)</tt></dd></dl>

<dl><dt><a name="PdocStatus-__str__"><strong>__str__</strong></a>(self)</dt><dd><tt>Return&nbsp;str(self).</tt></dd></dl>

<dl><dt><a name="PdocStatus-set_status_data"><strong>set_status_data</strong></a>(self, status_bitmap, read_timestamp)</dt><dd><tt>Given&nbsp;a&nbsp;status&nbsp;bitmap&nbsp;(from&nbsp;one&nbsp;of&nbsp;the&nbsp;P&lt;NN&gt;_STATE&nbsp;registers),&nbsp;update&nbsp;the&nbsp;instance&nbsp;with&nbsp;the&nbsp;new&nbsp;data.<br>
&nbsp;<br>
:param&nbsp;status_bitmap:&nbsp;&nbsp;integer,&nbsp;0-65535&nbsp;-&nbsp;state&nbsp;bitmap&nbsp;from&nbsp;P&lt;NN&gt;_STATE&nbsp;register<br>
:param&nbsp;read_timestamp:&nbsp;&nbsp;float&nbsp;-&nbsp;unix&nbsp;timetamp&nbsp;when&nbsp;the&nbsp;data&nbsp;was&nbsp;pulled&nbsp;from&nbsp;the&nbsp;SMARTbox<br>
:return:&nbsp;None</tt></dd></dl>

<hr>
Methods inherited from <a href="pasd.smartbox.html#PortStatus">pasd.smartbox.PortStatus</a>:<br>
<dl><dt><a name="PdocStatus-__repr__"><strong>__repr__</strong></a>(self)</dt><dd><tt>Return&nbsp;repr(self).</tt></dd></dl>

<dl><dt><a name="PdocStatus-set_current"><strong>set_current</strong></a>(self, current_raw, current, read_timestamp)</dt><dd><tt>Given&nbsp;a&nbsp;current&nbsp;reading&nbsp;(raw&nbsp;and&nbsp;scaled)&nbsp;and&nbsp;a&nbsp;read&nbsp;timestamp,&nbsp;update&nbsp;the&nbsp;instance&nbsp;with&nbsp;the&nbsp;new&nbsp;current&nbsp;data.<br>
&nbsp;<br>
:param&nbsp;current_raw:&nbsp;integer&nbsp;-&nbsp;raw&nbsp;ADC&nbsp;value<br>
:param&nbsp;current:&nbsp;flaot&nbsp;-&nbsp;current&nbsp;in&nbsp;mA<br>
:param&nbsp;read_timestamp:&nbsp;float&nbsp;-&nbsp;unix&nbsp;timetamp&nbsp;when&nbsp;the&nbsp;data&nbsp;was&nbsp;pulled&nbsp;from&nbsp;the&nbsp;SMARTbox<br>
:return:&nbsp;None</tt></dd></dl>

<dl><dt><a name="PdocStatus-status_to_integer"><strong>status_to_integer</strong></a>(self, write_state=False, write_to=False, write_breaker=False)</dt><dd><tt>Return&nbsp;a&nbsp;16&nbsp;bit&nbsp;integer&nbsp;state&nbsp;bitmap&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;instance&nbsp;data.<br>
&nbsp;<br>
If&nbsp;'write_state'&nbsp;is&nbsp;True,&nbsp;then&nbsp;the&nbsp;'desired_state_online'&nbsp;and&nbsp;'desired_state_offline'&nbsp;will&nbsp;have&nbsp;bitfields<br>
corresponding&nbsp;to&nbsp;the&nbsp;current&nbsp;instance&nbsp;data,&nbsp;otherwise&nbsp;they&nbsp;will&nbsp;contain&nbsp;'00'&nbsp;(meaning&nbsp;'do&nbsp;not&nbsp;overwrite').<br>
&nbsp;<br>
If&nbsp;'write_to'&nbsp;is&nbsp;True,&nbsp;then&nbsp;the&nbsp;'technicians&nbsp;override'&nbsp;bits&nbsp;will&nbsp;have&nbsp;bitfields&nbsp;corresponding&nbsp;to&nbsp;the<br>
current&nbsp;instance&nbsp;data&nbsp;(locally_forced_on&nbsp;and&nbsp;locally_forced_off),&nbsp;otherwise&nbsp;they&nbsp;will&nbsp;contain&nbsp;'00'<br>
&nbsp;<br>
If&nbsp;'write_breaker'&nbsp;is&nbsp;True,&nbsp;then&nbsp;the&nbsp;bit&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;'reset&nbsp;breaker'&nbsp;action&nbsp;will&nbsp;be&nbsp;1,&nbsp;otherwise<br>
it&nbsp;will&nbsp;contain&nbsp;0&nbsp;(do&nbsp;not&nbsp;reset&nbsp;the&nbsp;breaker).<br>
&nbsp;<br>
:param&nbsp;write_state:&nbsp;boolean&nbsp;-&nbsp;overwrite&nbsp;current&nbsp;desired_state_online&nbsp;and&nbsp;desired_state_offline&nbsp;fields<br>
:param&nbsp;write_to:&nbsp;boolean&nbsp;-&nbsp;overwrite&nbsp;'technicians&nbsp;local&nbsp;override'&nbsp;field<br>
:param&nbsp;write_breaker&nbsp;-&nbsp;send&nbsp;a&nbsp;1&nbsp;in&nbsp;the&nbsp;'reset&nbsp;breaker'&nbsp;field,&nbsp;otherwise&nbsp;send&nbsp;0.&nbsp;Local&nbsp;instance&nbsp;data&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ignored&nbsp;for&nbsp;this&nbsp;field.</tt></dd></dl>

<hr>
Data descriptors inherited from <a href="pasd.smartbox.html#PortStatus">pasd.smartbox.PortStatus</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>FNDH_CONF_REGS_1</strong> = {'SYS_48V1_V_TH': (1001, 4, '48V PSU 1, 48VDC voltage AH, WH, WL, AL', &lt;function scale_48v&gt;), 'SYS_48V2_V_TH': (1005, 4, '48V PSU 2, 48VDC voltage AH, WH, WL, AL', &lt;function scale_48v&gt;), 'SYS_48V_I_TH': (1013, 4, '48V PSU output current AH, WH, WL, AL', &lt;function scale_48vcurrent&gt;), 'SYS_48V_TEMP_TH': (1017, 4, '48V PSU temperature AH, WH, WL, AL', &lt;function scale_temp&gt;), 'SYS_5V_TEMP_TH': (1021, 4, '5V PSU temperature AH, WH, WL, AL', &lt;function scale_temp&gt;), 'SYS_5V_V_TH': (1009, 4, '5V PSU output voltage AH, WH, WL, AL', &lt;function scale_5v&gt;), 'SYS_OUTTEMP_TH': (1029, 4, 'Outside temperature AH, WH, WL, AL', &lt;function scale_temp&gt;), 'SYS_PCBTEMP_TH': (1025, 4, 'PCB temperature AH, WH, WL, AL', &lt;function scale_temp&gt;)}<br>
<strong>FNDH_POLL_REGS_1</strong> = {'P01_STATE': (27, 1, 'Port 01 state bitmap (r/w)', None), 'P02_STATE': (28, 1, 'Port 02 state bitmap (r/w)', None), 'P03_STATE': (29, 1, 'Port 03 state bitmap (r/w)', None), 'P04_STATE': (30, 1, 'Port 04 state bitmap (r/w)', None), 'P05_STATE': (31, 1, 'Port 05 state bitmap (r/w)', None), 'P06_STATE': (32, 1, 'Port 06 state bitmap (r/w)', None), 'P07_STATE': (33, 1, 'Port 07 state bitmap (r/w)', None), 'P08_STATE': (34, 1, 'Port 08 state bitmap (r/w)', None), 'P09_STATE': (35, 1, 'Port 09 state bitmap (r/w)', None), 'P10_STATE': (36, 1, 'Port 10 state bitmap (r/w)', None), ...}<br>
<strong>FNDH_REGISTERS</strong> = {1: {'CONF': {'SYS_48V1_V_TH': (1001, 4, '48V PSU 1, 48VDC voltage AH, WH, WL, AL', &lt;function scale_48v&gt;), 'SYS_48V2_V_TH': (1005, 4, '48V PSU 2, 48VDC voltage AH, WH, WL, AL', &lt;function scale_48v&gt;), 'SYS_48V_I_TH': (1013, 4, '48V PSU output current AH, WH, WL, AL', &lt;function scale_48vcurrent&gt;), 'SYS_48V_TEMP_TH': (1017, 4, '48V PSU temperature AH, WH, WL, AL', &lt;function scale_temp&gt;), 'SYS_5V_TEMP_TH': (1021, 4, '5V PSU temperature AH, WH, WL, AL', &lt;function scale_temp&gt;), 'SYS_5V_V_TH': (1009, 4, '5V PSU output voltage AH, WH, WL, AL', &lt;function scale_5v&gt;), 'SYS_OUTTEMP_TH': (1029, 4, 'Outside temperature AH, WH, WL, AL', &lt;function scale_temp&gt;), 'SYS_PCBTEMP_TH': (1025, 4, 'PCB temperature AH, WH, WL, AL', &lt;function scale_temp&gt;)}, 'POLL': {'P01_STATE': (27, 1, 'Port 01 state bitmap (r/w)', None), 'P02_STATE': (28, 1, 'Port 02 state bitmap (r/w)', None), 'P03_STATE': (29, 1, 'Port 03 state bitmap (r/w)', None), 'P04_STATE': (30, 1, 'Port 04 state bitmap (r/w)', None), 'P05_STATE': (31, 1, 'Port 05 state bitmap (r/w)', None), 'P06_STATE': (32, 1, 'Port 06 state bitmap (r/w)', None), 'P07_STATE': (33, 1, 'Port 07 state bitmap (r/w)', None), 'P08_STATE': (34, 1, 'Port 08 state bitmap (r/w)', None), 'P09_STATE': (35, 1, 'Port 09 state bitmap (r/w)', None), 'P10_STATE': (36, 1, 'Port 10 state bitmap (r/w)', None), ...}}}<br>
<strong>LED_CODES</strong> = {-1: 'UKNOWN', 0: 'OFF', 10: 'GREEN', 11: 'GREENSLOW', 12: 'GREENFAST', 13: 'GREENVFAST', 14: 'GREENDOTDASH', 20: 'YELLOW', 21: 'YELLOWSLOW', 22: 'YELLOWFAST', ...}<br>
<strong>LED_GREEN</strong> = 10<br>
<strong>LED_GREENDOTDASH</strong> = 14<br>
<strong>LED_GREENFAST</strong> = 12<br>
<strong>LED_GREENRED</strong> = 50<br>
<strong>LED_GREENSLOW</strong> = 11<br>
<strong>LED_GREENVFAST</strong> = 13<br>
<strong>LED_OFF</strong> = 0<br>
<strong>LED_RED</strong> = 30<br>
<strong>LED_REDDOTDASH</strong> = 34<br>
<strong>LED_REDFAST</strong> = 32<br>
<strong>LED_REDSLOW</strong> = 31<br>
<strong>LED_REDVFAST</strong> = 33<br>
<strong>LED_UNKNOWN</strong> = -1<br>
<strong>LED_YELLOW</strong> = 20<br>
<strong>LED_YELLOWDOTDASH</strong> = 24<br>
<strong>LED_YELLOWFAST</strong> = 22<br>
<strong>LED_YELLOWRED</strong> = 40<br>
<strong>LED_YELLOWREDSLOW</strong> = 41<br>
<strong>LED_YELLOWSLOW</strong> = 21<br>
<strong>LED_YELLOWVFAST</strong> = 23<br>
<strong>PORTCONFIG_FILENAME</strong> = 'pasd/fndh_ports.json'<br>
<strong>STATUS_ALARM</strong> = 2<br>
<strong>STATUS_CODES</strong> = {-1: 'STATUS_UNKNOWN', 0: 'STATUS_OK', 1: 'STATUS_WARNING', 2: 'STATUS_ALARM', 3: 'STATUS_RECOVERY', 4: 'STATUS_UNINITIALISED', 5: 'STATUS_POWERUP'}<br>
<strong>STATUS_OK</strong> = 0<br>
<strong>STATUS_POWERUP</strong> = 5<br>
<strong>STATUS_RECOVERY</strong> = 3<br>
<strong>STATUS_STRING</strong> = 'FNDH at address: %(modbus_address)s:<font color="#c040c0">\n</font>    ModBUS ...icator: %(indicator_code)s (%(indicator_state)s)<font color="#c040c0">\n</font>'<br>
<strong>STATUS_UNINITIALISED</strong> = 4<br>
<strong>STATUS_UNKNOWN</strong> = -1<br>
<strong>STATUS_WARNING</strong> = 1<br>
<strong>THRESHOLD_FILENAME</strong> = 'pasd/fndh_thresholds.json'</td></tr></table>
</body></html>